<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Livewire Events</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <h1>Test de Eventos Livewire</h1>
    <button onclick="testCharts()">Test Renderizar Charts</button>
    <button onclick="testLivewire()">Test Livewire</button>

    <div style="max-width: 400px; margin: 20px auto;">
        <canvas id="testChart"></canvas>
    </div>

    <div id="log" style="margin-top: 20px; padding: 10px; border: 1px solid #ccc; font-family: monospace; white-space: pre-wrap;"></div>

    <script>
        const log = (msg) => {
            const logDiv = document.getElementById('log');
            logDiv.textContent += new Date().toLocaleTimeString() + ': ' + msg + '\n';
            console.log(msg);
        };

        function testCharts() {
            log('Testing Chart.js...');
            const ctx = document.getElementById('testChart');
            if (!ctx) {
                log('ERROR: Canvas not found');
                return;
            }

            try {
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Activos', 'Morosos', 'Completados'],
                        datasets: [{
                            data: [5, 0, 0],
                            backgroundColor: ['#4dabf7', '#f59e0b', '#10b981']
                        }]
                    }
                });
                log('✅ Chart.js funciona correctamente');
            } catch (e) {
                log('❌ Error: ' + e.message);
            }
        }

        function testLivewire() {
            log('Testing Livewire...');
            if (typeof Livewire !== 'undefined') {
                log('✅ Livewire está cargado');
                log('Versión: ' + (Livewire.version || 'unknown'));
            } else {
                log('❌ Livewire NO está cargado');
            }
        }

        // Auto test al cargar
        window.addEventListener('load', () => {
            log('Página cargada');
            setTimeout(testCharts, 500);
        });
    </script>
</body>
</html>
